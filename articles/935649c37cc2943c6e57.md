---
title: "GitHub ã§æ„å›³ã›ã¬ Public Repository åŒ–ã‚’ãŠæ‰‹è»½ã«æ¤œçŸ¥ã™ã‚‹"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["GitHub", "Probot"]
published: false
---

## GitHub ã«ãŠã‘ã‚‹ Private Repository

### æ–°è¦ä½œæˆã®å ´åˆ

GitHub ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã™ã‚‹å ´åˆã€ã“ã®ã‚ˆã†ã« Public ã‹ Private ã‹é¸ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

![](https://user-images.githubusercontent.com/1130921/94332621-a05fa980-0011-11eb-9022-7b6586f07c24.png)

### é€”ä¸­ã§å¤‰æ›´ã™ã‚‹å ´åˆ

ã¾ãŸã€Private Repository ã‚’ Public Repository ã«å¤‰æ›´ã™ã‚‹å ´åˆã¯ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šã®ç”»é¢ã® Danger Zone å†…ã® Change repository visibility ã‹ã‚‰è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§å¯èƒ½ã§ã™ã€‚

![](https://user-images.githubusercontent.com/1130921/94332617-9dfd4f80-0011-11eb-8d67-c34374e2bf07.png)

![](https://user-images.githubusercontent.com/1130921/94332614-9ccc2280-0011-11eb-9e4f-db568606baea.png =350x)

### æ„å›³ã›ã¬ Public Repository åŒ–ã®ãƒªã‚¹ã‚¯

å¾Œè€…ã®å ´åˆã¯ GitHub å´ãŒä½•é‡ã«ã‚‚äºˆé˜²ç·šã‚’å¼µã£ã¦ãã‚Œã¦ã„ã‚‹ãŸã‚ã€ä½™ç¨‹ã®ã†ã£ã‹ã‚ŠãƒŸã‚¹ã‚’ã—ãªã„é™ã‚Šã¯èª¤æ“ä½œã§ Public Repository ã«ã—ã¦ã—ã¾ã†ã“ã¨ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

ã—ã‹ã—ã€èª¤ã£ã¦ Public Repository ã‚’ä½œæˆã—ã¦ã—ã¾ã£ãŸå ´åˆã¯ãªã‹ãªã‹æ°—ä»˜ãã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚UI ä¸Šã®å·®ç•°ã¯ãƒªãƒã‚¸ãƒˆãƒªåã®æ¨ªã«ã‚ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ã®ãŸã‚ã€ã“ã“ã«æ„è­˜ã‚’å‘ã‘ã¦ã„ãªã„é™ã‚Šã¯æ¤œçŸ¥ã¯é›£ã—ã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚

![](https://user-images.githubusercontent.com/1130921/94335256-42cd5c00-0015-11eb-8da5-910a5f0d8377.png)

ã“ã‚Œã«æ°—ä»˜ã‹ã¬ã¾ã¾ commit & push ã—ç¶šã‘ã¦ã—ã¾ã†ã‚ˆã†ãªã“ã¨ãŒã‚ã‚‹ã¨ã€é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã«ç¹‹ãŒã‚Šã‹ã­ã¾ã›ã‚“ã€‚

ã“ã‚Œã‚’ GitHub ä¸Šã®è¨­å®šã§åˆ¶é™ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã‹èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ Member æ¨©é™ã§ã‚ã‚Œã° **Private Repository ã‚’ä½œæˆã§ããªã„ã‚ˆã†ã«ã™ã‚‹åˆ¶é™ã‚’ã‹ã‘ã‚‹ã“ã¨ã¯ã§ãã‚‹**ã‚ˆã†ãªã®ã§ã™ãŒã€é€†ã¯ã§ããªã„ã‚ˆã†ã§ã—ãŸã€‚
(ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ã« Public ã®éƒ¨åˆ†ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ãŠã‚Šã€ã“ã‚Œã‚’ disabled ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚)

![](https://user-images.githubusercontent.com/1130921/94332620-9f2e7c80-0011-11eb-95da-2d93a1155074.png)

## ã©ã®ã‚ˆã†ã«é˜²ãã‹

ä»Šå›ã¯ã“ã†ã„ã£ãŸã“ã¨ã‚’æ¤œçŸ¥ã—ãŸã‚Šé˜²ã„ã ã‚Šã™ã‚‹ä»•çµ„ã¿ã‚’éå¸¸ã«ä½ã‚³ã‚¹ãƒˆã§ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚

## Prevent Public Repos

![](https://user-images.githubusercontent.com/1130921/94335622-c6884800-0017-11eb-8177-08a173f9f42b.png =400x)

ã“ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ãƒãƒƒãƒãƒªãƒãƒã‚‹ [Prevent Public Repos](https://probot.github.io/apps/prevent-public-repos/) ã¨ã„ã† GitHub Apps ãŒã‚ã‚Šã¾ã™ã€‚
èª¬æ˜æ–‡ã«ã‚‚ `Prevent Repos from being made public in an organization` ã¨ã‚ã‚Šã€æœ¬å½“ã«ã“ã®ãŸã‚ã«ã‚ã‚‹ã‚ˆã†ãª App ã§ã™ã€‚

ã¨ã„ã†ã‚ã‘ã§ã€ã“ã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚

## å°å…¥æ‰‹é †

1. Prevent Public Repos ã‚’å¯¾è±¡ã® Organization ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
![](https://user-images.githubusercontent.com/1130921/94332625-a190d680-0011-11eb-8d5a-53863dfdc3db.png)
![](https://user-images.githubusercontent.com/1130921/94332624-a190d680-0011-11eb-8538-1ebec373952a.png)
![](https://user-images.githubusercontent.com/1130921/94332623-a05fa980-0011-11eb-9ab9-8b5d51a570fc.png)
2. å¯¾è±¡ã® Organization å†…ã« `org-settings` ã¨ã„ã† Repository ã‚’ä½œæˆã™ã‚‹ï¼ˆPrivate Repository ã¨ã—ã¦ã®ä½œæˆã§æ§‹ã„ã¾ã›ã‚“ï¼‰
3. `org-settings` å†…ã« `.github/prevent-public-repos.yml` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
    ```yaml
    # Configuration for Prevent-Public-Repos

    # Turn on Monitor Mode. In this mode the repo visibility is not modified and only an Issue is created
    monitorOnly: true

    # Enables detection of repos that change visibility from private to public (not just newly created ones)
    enablePrivateToPublic: true

    # Issue Title when repo is privatized
    privatizedIssueTitle: '[CRITICAL] Public Repositories are Disabled for this Org'

    # Issue Body when repo is privatized
    privatizedIssueBody: 'NOTE: Public Repos are disabled for this organization! Repository was automatically converted to a Private Repo. Please contact an admin to override.'

    # Issue Title when monitor mode is enabled
    monitorIssueTitle: '[CRITICAL] Public Repository Created'

    # Issue Body when monitor mode is enable
    monitorIssueBody: 'Please note that this repository is publicly visible to the internet!'

    # Users/Groups that should be cc'ed on the issue. Should be users/groups separated by a space.
    # ccList: '@user123 @user456'

    # Repos to  exclude in detection. Should be a List of Strings.
    # excludeRepos: ['repo1', 'repo2']
    ```
4. æ¤œçŸ¥ã§ãã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã‚‹
![](https://user-images.githubusercontent.com/1130921/94332609-9a69c880-0011-11eb-85d7-a179c11ffcb9.png)
ãŸã‚ã—ã« Public Repository ã‚’ä½œæˆã™ã‚‹ã¨ä¸Šè¨˜ã®ã‚ˆã†ãª Issue ãŒä½œæˆã•ã‚Œã¾ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚‚é£›ã°ã—ã¦ãã‚Œã‚‹ã®ã§å®‰å¿ƒã§ã™ã€‚

ã¡ãªã¿ã« 2-3 ç•ªã®æ‰‹é †ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã«ã¤ã„ã¦ã¯ã€[ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š](https://github.com/issc29/probot-prevent-public-repos/blob/master/lib/defaults.js)ã®ã¾ã¾ã§ã‚ˆã‘ã‚Œã°ä¸è¦ã§ã™ã€‚

## å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ™å‹•ã«ã¤ã„ã¦

åŸºæœ¬çš„ã«ã¯[ã“ã“](https://github.com/issc29/probot-prevent-public-repos#how-it-works)ã® `How it works` ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šãªã®ã§ãã“ã‚’èª­ã‚“ã§ã‚‚ã‚‰ãˆã‚Œã°ä¸€é€šã‚Šã‚ã‹ã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€ `monitorOnly` ã¨ `enablePrivateToPublic` ã®é–¢ä¿‚æ€§ã ã‘è»½ãèª¬æ˜ã—ã¦ãŠãã¾ã™ã€‚

- monitorOnly
    - true
        - è¨­å®šå¾Œã«ä½œæˆã—ãŸ Repository ãŒ Public ã®å ´åˆã¯å¯¾è±¡ Repository ã« `monitorIssueTitle`, `monitorIssueBody` ã®å†…å®¹ã§**Issue ãŒè‡ªå‹•ã§ä½œæˆã•ã‚Œã‚‹ã®ã¿**
        - `enablePrivateToPublic` ãŒ true ã®å ´åˆã€è¨­å®šã‹ã‚‰ Public Repository ã«å¤‰æ›´ã—ãŸã¨ã—ã¦ã‚‚ã€åŒæ§˜ã®æŒ™å‹•
    - false
        - è¨­å®šå¾Œã«ä½œæˆã—ãŸ Public Repository ã¯å¼·åˆ¶çš„ã« Private Repository ã«å¤‰æ›´ã•ã‚Œã€å¯¾è±¡ Repository ã« `privatizedIssueTitle`, `privatizedIssueBody` ã®å†…å®¹ã§ Issue ãŒä½œæˆã•ã‚Œã‚‹
        - `enablePrivateToPublic` ãŒ true ã®å ´åˆã€è¨­å®šã‹ã‚‰ Public Repository ã«å¤‰æ›´ã—ãŸã¨ã—ã¦ã‚‚ã€åŒæ§˜ã®æŒ™å‹•

## çµ‚ã‚ã‚Šã«

åŸºæœ¬çš„ã«ã¯ç™ºç”Ÿã—ãªã„ã‚‚ã®ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ä¸‡ãŒä¸€ã®ã¨ãã«å‚™ãˆãŸä¿é™ºã¨æ€ã£ã¦è¨­å®šã—ã¦ãŠãã®ã¯ã‚ã‚Šã‹ãªã¨æ€ã„ã¾ã™ã€‚
è¨­å®šè‡ªä½“ã¯ 10 åˆ†ã‹ãã“ã‚‰ã§çµ‚ã‚ã‚‹ã¨æ€ã†ã®ã§ã€GitHub Organization ã®ç®¡ç†è€…ã®æ–¹ã¯çŸ¥ã£ã¦ãŠãã¨å¹¸ã›ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---

ã“ã®è¨˜äº‹ã¯ GitHub é€£æºã§æ›¸ã„ã¦ã„ã¾ã™ã€‚åŠ ç­†ä¿®æ­£ãªã©ä¿®æ­£ PR ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ï¼
https://github.com/serima/zenn-content
